<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validador de Jueces</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #e4e4e7;
        }

        .validator-container {
            background: rgba(30, 30, 46, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05);
            max-width: 700px;
            width: 100%;
            text-align: center;
        }

        h1 {
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            font-size: 32px;
            font-weight: 700;
        }

        .input-group {
            margin-bottom: 25px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #d1d5db;
            font-weight: 600;
            font-size: 16px;
        }

        textarea {
            width: 100%;
            min-height: 250px;
            padding: 16px;
            background: rgba(17, 24, 39, 0.8);
            border: 2px solid rgba(75, 85, 99, 0.5);
            border-radius: 12px;
            font-size: 14px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e4e4e7;
            resize: vertical;
            transition: all 0.3s ease;
            line-height: 1.4;
        }

        textarea:focus {
            outline: none;
            border-color: #60a5fa;
            background: rgba(17, 24, 39, 1);
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
        }

        textarea::placeholder {
            color: #6b7280;
        }

        .validate-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
            color: white;
            border: none;
            padding: 18px 36px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 25px 0;
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .validate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.4);
        }

        .validate-btn:active {
            transform: translateY(-1px);
        }

        .result-container {
            margin-top: 30px;
            padding: 25px;
            border-radius: 16px;
            font-size: 20px;
            font-weight: 700;
            transition: all 0.3s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .result-good {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1));
            color: #4ade80;
            border: 2px solid rgba(34, 197, 94, 0.3);
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.2);
        }

        .result-error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1));
            color: #f87171;
            border: 2px solid rgba(239, 68, 68, 0.3);
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.2);
        }

        .judge-name {
            font-size: 16px;
            margin-top: 12px;
            font-weight: 400;
            opacity: 0.9;
        }

        .hidden {
            display: none;
        }

        .info-text {
            color: #9ca3af;
            font-size: 14px;
            margin-top: 25px;
            padding: 20px;
            background: rgba(17, 24, 39, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(75, 85, 99, 0.3);
            line-height: 1.6;
        }

        .navigation {
            position: fixed;
            top: 20px;
            right: 20px;
        }

        .nav-link {
            background: rgba(30, 30, 46, 0.9);
            color: #60a5fa;
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid rgba(96, 165, 250, 0.3);
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: rgba(96, 165, 250, 0.1);
            border-color: #60a5fa;
        }

        .clear-btn {
            background: rgba(75, 85, 99, 0.8);
            color: #d1d5db;
            border: 1px solid rgba(75, 85, 99, 0.5);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            float: right;
            margin-top: 10px;
        }

        .clear-btn:hover {
            background: rgba(75, 85, 99, 1);
            border-color: #6b7280;
        }
    </style>
</head>
<body>
    <nav class="navigation">
        <a href="index.html" class="nav-link">üìÑ Calculadora de Tiempo</a>
    </nav>

    <div class="validator-container">
        <h1>üë®‚Äç‚öñÔ∏è Validador de Jueces</h1>
        
        <div class="input-group">
            <label for="case-text">Informaci√≥n del caso:</label>
            <textarea 
                id="case-text" 
                placeholder="Pega aqu√≠ la informaci√≥n del caso que contiene los datos del juez...&#10;&#10;Ejemplo:&#10;Removal&#10;Charging Doc. Date: 07/14/2022&#10;Alien Name: LEDESMA CABRERA, DAYSI&#10;Next Case Hearing: 12/15/2025 08:30 AM - 09:00 AM MASTER HEARING Ellison, John&#10;..."
            ></textarea>
            <button class="clear-btn" onclick="clearText()">üóëÔ∏è Limpiar</button>
        </div>
        
        <button class="validate-btn" onclick="validateJudge()">üîç Validar Juez</button>
        
        <div id="judge-result" class="result-container hidden">
            <div id="judge-result-text"></div>
            <div id="judge-name" class="judge-name"></div>
        </div>
        
        <div class="info-text">
            <strong>‚úÖ Verde: PUEDES TRABAJARLO</strong> - Juez NO est√° en la lista bloqueada<br>
            <strong>‚ùå Rojo: NO TRABAJAR REFUND</strong> - Juez S√ç est√° en la lista bloqueada
        </div>
    </div>

    <script>
        // Lista de jueces BLOQUEADOS - con nombres completos cuando est√°n disponibles
        const blockedJudges = [
            // Jueces con nombres completos (formato: "Apellido, Nombre")
            'SCALA, THERESA',
            'TIJERINA, ERIC J.',
            'MARTINEZ, ELIZABETH',
            'SANTANDER, DANIEL J.',
            'SIMS, DEITRICH H.',
            'JOHNSON, JEREMIAH',
            'CHEN, SHUTING',
            'JOHNSON, SHANE E.',
            'TISOCCO, MICHAEL',
            'WINDROW, HAYDEN E.',
            'PARCHERT, BRETT M.',
            'BUTLER, JEREMY J.',
            'DINH, ROGER H.',
            'GAMBILL, SCOTT D.',
            'GEORGE, AMBER D',
            'SLAYTON, MICHELLE A.',
            'STAR, SHADEE M.',
            'SWINK, ARWEN A.',
            'NEWAZ, RIFIAN S.',
            
            // Jueces sin nombre completo a√∫n (solo apellidos)
            'FLUKE',
            'REYES',
            
            // Variaciones adicionales para casos especiales
            'SFR JOHNSON', 
            'SEATTLE JOHNSON'
        ];

        function validateJudge() {
            const caseText = document.getElementById('case-text').value.trim();
            const resultContainer = document.getElementById('judge-result');
            const resultText = document.getElementById('judge-result-text');
            const judgeNameElement = document.getElementById('judge-name');

            if (!caseText) {
                alert('Por favor, ingresa la informaci√≥n del caso.');
                return;
            }

            // Buscar nombres de jueces en el texto
            const foundJudges = extractJudgeNames(caseText);
            const blockedJudgesFound = [];

            // Verificar cada juez encontrado contra la lista de bloqueados
            foundJudges.forEach(judge => {
                if (isJudgeBlocked(judge)) {
                    blockedJudgesFound.push(judge);
                }
            });

            resultContainer.classList.remove('hidden', 'result-good', 'result-error');

            if (blockedJudgesFound.length > 0) {
                // Se encontr√≥ al menos un juez bloqueado
                resultContainer.classList.add('result-error');
                resultText.textContent = '‚ùå NO TRABAJAR REFUND';
                judgeNameElement.textContent = `Juez bloqueado: ${blockedJudgesFound.join(', ')}`;
            } else {
                // No se encontr√≥ ning√∫n juez bloqueado
                resultContainer.classList.add('result-good');
                resultText.textContent = '‚úÖ PUEDES TRABAJARLO';
                judgeNameElement.textContent = '';
            }
        }

        function extractJudgeNames(text) {
            const normalizedText = text.toUpperCase();
            const foundJudges = [];
            
            // Patrones mejorados para identificar nombres de jueces
            const patterns = [
                // Patr√≥n principal: MASTER HEARING seguido de apellido, nombre
                /MASTER\s+HEARING\s+([A-Z][a-zA-Z]+,\s*[A-Z][a-zA-Z]*(?:\s+[A-Z]\.?)?)/g,
                // Patr√≥n alternativo: HEARING seguido de apellido, nombre al final de l√≠nea
                /HEARING\s+([A-Z][a-zA-Z]+,\s*[A-Z][a-zA-Z]*(?:\s+[A-Z]\.?)?)\s*$/gm,
                // Patr√≥n para IJ o Judge seguido de nombre
                /(?:IJ|JUDGE)[:\s]+([A-Z][a-zA-Z]+,\s*[A-Z][a-zA-Z]*(?:\s+[A-Z]\.?)?)/g,
                // Patr√≥n general para formato Apellido, Nombre
                /\b([A-Z][A-Z]+,\s*[A-Z][a-zA-Z]*(?:\s+[A-Z]\.?)?)\b/g
            ];

            patterns.forEach(pattern => {
                let match;
                while ((match = pattern.exec(normalizedText)) !== null) {
                    if (match[1]) {
                        let judgeName = match[1].trim();
                        // Limpiar caracteres no deseados
                        judgeName = judgeName.replace(/[^\w\s,.-]/g, '').trim();
                        
                        // Validar que es un nombre de juez v√°lido
                        if (isValidJudgeName(judgeName) && !foundJudges.includes(judgeName)) {
                            foundJudges.push(judgeName);
                        }
                    }
                }
            });

            // B√∫squeda espec√≠fica en contexto de HEARING
            const lines = normalizedText.split('\n');
            lines.forEach(line => {
                if (line.includes('HEARING') && !line.includes('LOCATION') && !line.includes('ALIEN NAME')) {
                    // Buscar patrones de nombres despu√©s de HEARING
                    const hearingMatch = line.match(/HEARING\s+(.+)$/);
                    if (hearingMatch) {
                        const afterHearing = hearingMatch[1].trim();
                        
                        // Buscar formato Apellido, Nombre
                        const nameMatch = afterHearing.match(/([A-Z][a-zA-Z]+,\s*[A-Z][a-zA-Z]*(?:\s+[A-Z]\.?)?)/);
                        if (nameMatch && isValidJudgeName(nameMatch[1])) {
                            const judgeName = nameMatch[1].trim();
                            if (!foundJudges.includes(judgeName)) {
                                foundJudges.push(judgeName);
                            }
                        }
                    }
                }
            });

            return foundJudges;
        }

        function isValidJudgeName(name) {
            // Validar que el nombre tiene el formato correcto para ser un juez
            if (!name || name.length < 3) return false;
            
            // Debe tener formato "Apellido, Nombre" o solo apellido
            const hasCommaFormat = name.includes(',');
            
            // Si tiene coma, validar formato completo
            if (hasCommaFormat) {
                const parts = name.split(',').map(p => p.trim());
                if (parts.length !== 2 || parts[0].length < 2 || parts[1].length < 1) {
                    return false;
                }
                
                // El apellido debe ser principalmente may√∫sculas
                if (!parts[0].match(/^[A-Z][A-Z]+$/)) {
                    return false;
                }
                
                // El nombre debe empezar con may√∫scula
                if (!parts[1].match(/^[A-Z]/)) {
                    return false;
                }
            }
            
            // Excluir nombres que claramente son de clientes (tienen patrones espec√≠ficos)
            const excludePatterns = [
                /\b(ALIEN|CLIENT|RESPONDENT|PETITIONER)\b/,
                /\b[A-Z]+-[A-Z]+\b/, // Nombres con gui√≥n como MARTINEZ-PESQUERA
                /\b[A-Z]{3,}\s+[A-Z]{3,}\s+[A-Z]{3,}\b/ // Tres palabras todas en may√∫sculas
            ];
            
            return !excludePatterns.some(pattern => pattern.test(name));
        }

        function isJudgeBlocked(judgeName) {
            const normalizedName = judgeName.toUpperCase().trim();
            
            return blockedJudges.some(blocked => {
                const normalizedBlocked = blocked.toUpperCase().trim();
                
                // Para jueces con nombre completo (formato "Apellido, Nombre")
                if (normalizedBlocked.includes(',')) {
                    // Coincidencia exacta del nombre completo
                    if (normalizedName === normalizedBlocked) return true;
                    
                    // Coincidencia parcial si el texto contiene el nombre completo
                    if (normalizedName.includes(normalizedBlocked)) return true;
                    
                    return false;
                }
                
                // Para jueces con solo apellido
                else {
                    // Si el nombre encontrado tiene formato completo, comparar solo el apellido
                    if (normalizedName.includes(',')) {
                        const lastName = normalizedName.split(',')[0].trim();
                        return lastName === normalizedBlocked;
                    }
                    
                    // Si ambos son solo apellidos, comparaci√≥n directa
                    return normalizedName === normalizedBlocked;
                }
            });
        }

        function clearText() {
            document.getElementById('case-text').value = '';
            document.getElementById('judge-result').classList.add('hidden');
        }
    </script>
</body>
</html>